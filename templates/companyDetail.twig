{% extends "base.twig" %}
{% block content %}
<div class="w-100 row justify-between-content " id="idDivcontentCompanie">
	<div class="card w-75" >
		<div class="card-header bg-light">
			<div class="nav d-flex nav-pills bordered" id="v-pills-tab" role="tablist" aria-orientation="horizontal">
				{# <a class="btn  active" data-toggle="pill" href="#branch-data" role="tab" aria-controls="v-pills-profile" aria-selected="true">Principal</a> #}
				<a class="btn active" data-toggle="pill" href="#sucursales-data" role="tab" aria-controls="v-pills-profile" aria-selected="true">Sucursales</a>
				<a class="btn" data-toggle="pill" href="#colors-data" role="tab" aria-controls="v-pills-profile" aria-selected="false" onclick="getColorsInfo()">Rep. impresa</a>
				<a class="btn" data-toggle="pill" href="#caes-data" role="tab" aria-controls="v-pills-profile" aria-selected="false">CAES</a>
				<a class="btn " data-toggle="pill" href="#resoluciones-data" role="tab" aria-controls="v-pills-profile" aria-selected="false">Resoluciones</a>
				<a class="btn " data-toggle="pill" href="#facturacion-data" role="tab" aria-controls="v-pills-profile" aria-selected="false">Facturación</a>
				<!--a class="btn " data-toggle="pill" href="#estadisticas-data" role="tab" aria-controls="v-pills-profile" aria-selected="false">Estadísticas</a-->
				<a class="btn " data-toggle="pill" href="#importar-data" role="tab" aria-controls="v-pills-profile" aria-selected="false">Importación emitidos</a>
				<a class="btn " data-toggle="pill" href="#importar-receipt" role="tab" aria-controls="v-pills-profile" aria-selected="false">Importación recibidos</a>
				<a class="btn " data-toggle="pill" href="#users-data" role="tab" aria-controls="v-pills-profile" aria-selected="false">Usuarios</a>
				<a class="btn " data-toggle="pill" href="#customers-data" role="tab" aria-controls="v-pills-profile" aria-selected="false" >Clientes</a>
			</div>
		</div>
		{# {{giros}} #}
		<div class="card-body">
			<div class="tab-content">
				<!-- SUCURSAL -->
				{% include("infoCompanieSucursales.twig") %}

				<!-- COLORES / REPRESENTACIÓN IMPRESA -->
				{% include("infoCompanieColors.twig") %}

				<!-- CAES -->
				<div class="tab-pane fade" id="caes-data" role="tabpanel">
					<div class="containerTable" style="max-height: 30%;">
			        	<table class="table" id="tbodyCompaniesCaesData">
							<thead>
								<tr>
									<th>CFE</th>
									<th>Vencimiento</th>
									<th>Disponibles</th>
									<th>Total</th>
								</tr>
							</thead>
							<tbody></tbody>
						</table>
			        </div>
				</div>
				<!-- RESOLUCIONES -->
				{% include("resolucionesComapnieDetails.twig") %}


				<!-- FACTURACION -->
				{% include("emited.twig") %}

				<!-- ESTADÍSTICAS -->
				{% include("infoCompanieReports.twig") %}


				<!-- IMPORTAR XML EMITIDOS-->
				{% include("importCfeEmited.twig") %}


				<!-- IMPORTAR XML RECIBIDOS-->
				{% include("importCfeReceipt.twig") %}


				<!-- USUARIOS -->
				{% include("users.twig") %}

				<!-- CLIENTES -->
				{# <div class="containerCustomers" style="max-height: 80vh;"> #}
					{% include("customers.twig") %}
				{# </div> #}
			</div>
		</div>
	</div>
</div>

{% block script %}
<script type="text/javascript" src="{{ path_for('Start') }}scripts/companies.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/statusCompanies.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/resolutions.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/emited.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/importCfeEmited.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/importCfeReceipt.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/repImpresa.js{{ version }}"></script>
<script type="text/javascript" src="{{ path_for('Start') }}scripts/customers.js{{ version }}"></script>

<script type="text/javascript">
	$(document).ready(() => {
		branchSelected = $("#selectBranchCompanieDetails").val();
		rutSelected = $("#textRutCompanieSelected").text();
		loadBranchCompanieData(branchSelected, rutSelected);
		loadCaesDetailsCompanies(rutSelected);
		loadUsersCompanie(rutSelected);
		loadCustomers();
		
		$('.containerTable.customers').on('scroll', function() {
			if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight - 10) {
				updateTable('customersTableBody');
			}
		});
	});
</script>
{% endblock %}
{% endblock %}